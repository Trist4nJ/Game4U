from utilisateurs import connexion_utilisateur
from jeux import afficher_locations_en_cours, retourner_un_jeu, louer_jeu, rechercher_jeux
from admin import menu_admin

def menu_utilisateur(utilisateur):
    while True:
        print("\n=== MENU UTILISATEUR ===")
        print("1. ğŸ” Rechercher un jeu")
        print("2. ğŸ“¦ Louer un jeu")
        print("3. ğŸ” Retourner un jeu")
        print("4. ğŸ“‹ Voir mes locations")
        print("5. âŒ Quitter")

        choix = input("Choix : ")

        if choix == "1":
            rechercher_jeux()
        elif choix == "2":
            louer_jeu(utilisateur['id_utilisateur'])
        elif choix == "3":
            retourner_un_jeu(utilisateur['id_utilisateur'])
        elif choix == "4":
            afficher_locations_en_cours(utilisateur['id_utilisateur'])
        elif choix == "5":
            print("ğŸ‘‹ Ã€ bientÃ´t !")
            break
        else:
            print("â— Choix invalide.")

def main():
    utilisateur = connexion_utilisateur()
    if utilisateur is None:
        print("âŒ Connexion Ã©chouÃ©e.")
        return

    if utilisateur['role'].lower() == "admin":
        print("\nğŸ” AccÃ¨s administrateur")
        menu_admin()
    else:
        print(f"\nğŸ‘‹ Bienvenue {utilisateur['nom']} !")
        menu_utilisateur(utilisateur)

if __name__ == "__main__":
    main()
