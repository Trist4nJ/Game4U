from utilisateurs import connexion_utilisateur
from jeux import afficher_locations_en_cours, retourner_un_jeu, louer_jeu, rechercher_jeux
from admin import menu_admin

def menu_utilisateur(utilisateur):
    while True:
        print("\n=== MENU UTILISATEUR ===")
        print("1. 🔍 Rechercher un jeu")
        print("2. 📦 Louer un jeu")
        print("3. 🔁 Retourner un jeu")
        print("4. 📋 Voir mes locations")
        print("5. ❌ Quitter")

        choix = input("Choix : ")

        if choix == "1":
            rechercher_jeux()
        elif choix == "2":
            louer_jeu(utilisateur['id_utilisateur'])
        elif choix == "3":
            retourner_un_jeu(utilisateur['id_utilisateur'])
        elif choix == "4":
            afficher_locations_en_cours(utilisateur['id_utilisateur'])
        elif choix == "5":
            print("👋 À bientôt !")
            break
        else:
            print("❗ Choix invalide.")

def main():
    utilisateur = connexion_utilisateur()
    if utilisateur is None:
        print("❌ Connexion échouée.")
        return

    if utilisateur['role'].lower() == "admin":
        print("\n🔐 Accès administrateur")
        menu_admin()
    else:
        print(f"\n👋 Bienvenue {utilisateur['nom']} !")
        menu_utilisateur(utilisateur)

if __name__ == "__main__":
    main()
